; PlatformIO Project Configuration File for LuaSys
;
; Build environments for all ESP32 variants
;
; Usage:
;   pio run -e esp32dev          # Build for ESP32
;   pio run -e esp32-s2          # Build for ESP32-S2
;   pio run -e esp32-s3          # Build for ESP32-S3
;   pio run -e esp32-c3          # Build for ESP32-C3
;   pio run -t upload -e esp32dev # Upload to ESP32

[platformio]
default_envs = esp32dev

[env]
framework = arduino
platform = espressif32
monitor_speed = 115200
build_flags =
    -DCORE_DEBUG_LEVEL=3
    -DLUAT_USE_FREERTOS=1
lib_deps =
    https://github.com/satoren/lua-arduino.git

; Upload filesystem (sys.lua) to SPIFFS
; Put sys.lua in data/ folder
board_build.filesystem = spiffs
extra_scripts =
    pre:scripts/copy_lua.py

; ==========================================
; ESP32 Classic
; ==========================================
[env:esp32dev]
board = esp32dev
upload_speed = 921600

; ==========================================
; ESP32-S2
; ==========================================
[env:esp32-s2]
board = esp32-s2-saola-1
upload_speed = 460800

; ==========================================
; ESP32-S3
; ==========================================
[env:esp32-s3]
board = esp32-s3-devkitc-1
upload_speed = 921600
build_flags =
    ${env.build_flags}
    -DARDUINO_USB_CDC_ON_BOOT=1

; ==========================================
; ESP32-C3
; ==========================================
[env:esp32-c3]
board = esp32-c3-devkitm-1
upload_speed = 460800
build_flags =
    ${env.build_flags}
    -DARDUINO_USB_CDC_ON_BOOT=1
